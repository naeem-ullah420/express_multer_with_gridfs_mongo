<!DOCTYPE html>
<html lang="en">
<head>
  <title>Bootstrap 5 Example</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
</head>
<body>

<div class="container-fluid mt-5 text-center">
   <h2>Mongodb Gridfs files Upload</h2>
  <div class="row justify-content-center">
    <div class="col-md-8 mt-2">
        <form action="/uploadFile" method="post" enctype="multipart/form-data">
            <input type="file" name="files" class="form-control" multiple />
            <input type="submit" value="Upload" class="btn btn-primary mt-2">
        </form>
    </div>
  </div>

  <div class="row">
    <% for(let file of files) { %>
        <div class="col-md-3">
            <% if(file.contentType.includes("image")) { %>
                <img src="http://localhost:8000/getFile/<%=file._id  %>" width="100%" height="200"/>
            <% }  else if(file.contentType.includes("video")) {%>
                <video src="http://localhost:8000/getFile/<%=file._id  %>" width="100%" height="200" controls></video>
            <% } else { %>
                <div style="width: 100%; height:200px;">
                    <a href="http://localhost:8000/getFile/<%=file._id  %>" width="100%" height="200" controls>Download</a>
                </div>
            <% } %> 
            <p><%=file.filename.length>30 ? file.filename.slice(0, 30) + "..." : file.filename  %></p>
            <a href="http://localhost:8000/deleteFile/<%=file._id  %>" class="btn btn-danger w-100">Delete</a>
        </div>
      <% } %>
  </div>

</div>

</body>
</html>
